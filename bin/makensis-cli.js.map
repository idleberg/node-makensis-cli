{"version":3,"sources":["../src/makensis-cli.js"],"names":["program","meta","require","validCharsets","version","description","arguments","usage","option","parseInt","action","cmd","filePath","flags","inputCharset","indexOf","match","noCD","nocd","noConfig","noconfig","pause","ppo","json","safePPO","safePpo","strict","verbose","wine","options","help","parse","process","argv","args","length"],"mappings":"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","file":"makensis-cli.js","sourcesContent":["\n\nimport * as program from 'commander';\nimport { compile, hdrinfo, cmdhelp, version } from './util';\nconst meta = require('../package.json');\n\nconst validCharsets = [\n  'ACP',\n  'OEM',\n  'UTF8',\n  'UTF16BE',\n  'UTF16LE'\n];\n\nprogram\n  .version(meta.version)\n  .description('CLI version of node-makensis')\n  .arguments('<command> [file.nsi]>')\n  .usage('<command> [file.nsi] [options]')\n  .option('-i, --input-charset <string>', 'ACP|OEM|CP#|UTF8|UTF16[LE|BE]')\n  .option('-j, --json', 'print hdrinfo as JSON')\n  .option('-p, --pause', 'pauses after execution')\n  .option('-P, --ppo', 'preprocess to stdout/file')\n  .option('-S, --safe-ppo', 'preprocess to stdout/file')\n  .option('-v, --verbose <n>', 'verbosity where n is 4=all,3=no script,2=no info,1=no warnings,0=none', parseInt)\n  .option('-w, --wine', 'use Wine to run makenis')\n  .option('-x, --strict', 'treat warnings as errors')\n  .action(function(cmd, filePath, flags) {\n\n    let inputCharset = (typeof flags.inputCharset !== 'undefined' && (validCharsets.indexOf(flags.inputCharset) !== -1 || flags.inputCharset.match(/CP\\d+/) !== null)) ? flags.inputCharset : '';\n    let noCD = (typeof flags.nocd === 'undefined') ? false : true;\n    let noConfig = (typeof flags.noconfig === 'undefined') ? false : true;\n    let pause = (typeof flags.pause === 'undefined') ? false : true;\n    let ppo = (typeof flags.ppo === 'undefined') ? false : true;\n    let json = (typeof flags.json === 'undefined') ? false : true;\n    let safePPO = (typeof flags.safePpo === 'undefined') ? false : true;\n    let strict = (typeof flags.strict === 'undefined') ? false : true;\n    let verbose = (flags.verbose >= 0 && flags.verbose <= 4) ? flags.verbose : null;\n    let wine = (typeof flags.wine === 'undefined') ? false : true;\n\n    const options = {\n      'inputCharset': inputCharset,\n      'json': json,\n      'noCD': noCD,\n      'noConfig': noConfig,\n      'pause': pause,\n      'ppo': ppo,\n      'safePPO': safePPO,\n      'strict': strict,\n      'verbose': verbose,\n      'wine': wine\n    };\n\n    switch (cmd) {\n      case 'build':\n      case 'c':\n      case 'compile':\n      case 'm':\n      case 'make':\n        compile(filePath, options);\n        break;\n      case 'f':\n      case 'flags':\n      case 'hdrinfo':\n      case 'i':\n      case 'info':\n        hdrinfo(options);\n        break;\n      case 'v':\n      case 'version':\n        version(options);\n        break;\n      case 'h':\n      case 'cmdhelp':\n      case 'help':\n        cmdhelp(filePath, options);\n        break;\n      default:\n        program.help();\n        break;\n    }\n  })\n.parse(process.argv);\n\nif (program.args.length === 0) program.help();\n"]}